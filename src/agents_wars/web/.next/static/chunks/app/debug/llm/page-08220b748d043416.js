(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{8686:function(e,t,r){Promise.resolve().then(r.bind(r,1505))},1505:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437),n=r(2265),a=r(9547),o=r(5694),l=r(9733),i=r(7209);function d(){let[e,t]=(0,n.useState)("openai"),[r,d]=(0,n.useState)("gpt-4o"),[u,c]=(0,n.useState)("Hello"),[p,f]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),x=async t=>{t.preventDefault(),f("");let s=[{role:"user",content:u}];if(h){let t=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:r,messages:s,stream:!0})});if(!t.body){f("No stream body");return}let n=t.body.getReader(),a=new TextDecoder;for(;;){let{done:e,value:t}=await n.read();if(e)break;let r=a.decode(t,{stream:!0});f(e=>e+r)}return}let n=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:r,messages:s})});f(JSON.stringify(await n.json(),null,2))};return(0,s.jsxs)("main",{className:"space-y-4 p-6",style:{backgroundColor:"#ECEADF"},children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",style:{color:"#3F404C"},children:"LLM Debug"}),(0,s.jsx)(a.x,{}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-2 rounded-[12px]",style:{background:"#fff",border:"1px solid #DFD4CA",padding:"24px",boxShadow:"0 1px 3px rgba(63,64,76,0.1), 0 1px 2px rgba(63,64,76,0.06)"},children:[(0,s.jsx)(o.U,{provider:e,model:r,onChange:e=>{t(e.provider),d(e.model)}}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{children:["Prompt",(0,s.jsx)(i.I,{value:u,onChange:e=>c(e.target.value),className:"ml-2 w-80 border"})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked)}),(0,s.jsx)("span",{children:"Stream"})]})}),(0,s.jsx)(l.z,{type:"submit",className:"border",variant:"secondary",children:"Send"})]}),(0,s.jsx)("pre",{className:"min-h-24 whitespace-pre-wrap break-words border p-2",children:p})]})}},9547:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var s=r(7437),n=r(2265);function a(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(null);if((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let r=await e.json();t(r)}catch(e){a("Unable to load provider status")}})()},[]),r)return(0,s.jsx)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:r});if(!e)return null;let o=[];return(e.openaiConfigured||o.push("OpenAI"),e.openrouterConfigured||o.push("OpenRouter"),0===o.length)?null:(0,s.jsxs)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:["Missing provider configuration: ",o.join(", "),". Some features may be limited."]})}},5694:function(e,t,r){"use strict";r.d(t,{U:function(){return a}});var s=r(7437),n=r(2265);function a(e){var t;let{provider:r,model:a,onChange:o}=e,[l,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let t=await e.json();i(t)}catch(e){i({openaiConfigured:!1,openrouterConfigured:!1,allowedModels:[]})}})()},[]);let d=(null==l?void 0:null===(t=l.allowedModels)||void 0===t?void 0:t.length)?l.allowedModels:[];return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"space-x-2",children:(0,s.jsxs)("label",{className:"text-slate-700",children:["Provider",(0,s.jsxs)("select",{value:r,onChange:e=>o({provider:e.target.value,model:a}),className:"ml-2 border border-slate-300 bg-white p-1 text-slate-900","data-testid":"pms-provider",children:[(0,s.jsx)("option",{value:"openai",children:"openai"}),(0,s.jsx)("option",{value:"openrouter",children:"openrouter"})]})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"text-slate-700",children:["Model",d.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("select",{value:a,onChange:e=>o({provider:r,model:e.target.value}),className:"ml-2 border border-slate-300 bg-white p-1 text-slate-900","data-testid":"pms-model",children:d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("input",{type:"hidden",value:a,"data-testid":"pms-model-input",readOnly:!0})]}):(0,s.jsx)("input",{value:a,onChange:e=>o({provider:r,model:e.target.value}),className:"ml-2 border border-slate-300 bg-white p-1 text-slate-900","data-testid":"pms-model-input"})]})})]})}},9733:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(7437),n=r(2265),a=r(4839);let o=n.forwardRef((e,t)=>{let{className:r,variant:n="default",size:o="md",asChild:l,children:i,...d}=e,u=(0,a.Z)("inline-flex items-center justify-center rounded transition-colors disabled:opacity-50 disabled:pointer-events-none","sm"===o&&"px-2 py-1 text-sm","md"===o&&"px-3 py-2 text-sm","lg"===o&&"px-4 py-2 text-base","default"===n&&"bg-primary text-white hover:bg-orange-500 shadow-subtle focus:outline-none focus:ring-2 focus:ring-primary","secondary"===n&&"bg-slate-700 text-slate-100 hover:bg-slate-600 shadow-subtle focus:outline-none focus:ring-2 focus:ring-primary/50","ghost"===n&&"bg-transparent text-slate-100 hover:bg-slate-800","destructive"===n&&"bg-red-600 text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500/60","outline"===n&&"border border-slate-700 text-slate-100 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-primary/50",r);return l?(0,s.jsx)("span",{className:u,children:i}):(0,s.jsx)("button",{ref:t,className:u,...d,children:i})});o.displayName="Button"},7209:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var s=r(7437),n=r(2265),a=r(4839);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("input",{ref:t,className:(0,a.Z)("w-full rounded bg-slate-800 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-primary border border-slate-700",r),...n})});o.displayName="Input"},4839:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=e(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8686)}),_N_E=e.O()}]);