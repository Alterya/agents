(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{8686:function(e,t,r){Promise.resolve().then(r.bind(r,1505))},1505:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(7437),a=r(2265),s=r(9547),l=r(5694),o=r(9733),i=r(7209);function d(){let[e,t]=(0,a.useState)("openai"),[r,d]=(0,a.useState)("gpt-4o"),[u,c]=(0,a.useState)("Hello"),[p,f]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),x=async t=>{t.preventDefault(),f("");let n=[{role:"user",content:u}];if(h){let t=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:r,messages:n,stream:!0})});if(!t.body){f("No stream body");return}let a=t.body.getReader(),s=new TextDecoder;for(;;){let{done:e,value:t}=await a.read();if(e)break;let r=s.decode(t,{stream:!0});f(e=>e+r)}return}let a=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:r,messages:n})});f(JSON.stringify(await a.json(),null,2))};return(0,n.jsxs)("main",{className:"space-y-4 p-6",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"LLM Debug"}),(0,n.jsx)(s.x,{}),(0,n.jsxs)("form",{onSubmit:x,className:"space-y-2",children:[(0,n.jsx)(l.U,{provider:e,model:r,onChange:e=>{t(e.provider),d(e.model)}}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Prompt",(0,n.jsx)(i.I,{value:u,onChange:e=>c(e.target.value),className:"ml-2 w-80 border"})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked)}),(0,n.jsx)("span",{children:"Stream"})]})}),(0,n.jsx)(o.z,{type:"submit",className:"border",variant:"secondary",children:"Send"})]}),(0,n.jsx)("pre",{className:"min-h-24 whitespace-pre-wrap break-words border p-2",children:p})]})}},9547:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(7437),a=r(2265);function s(){let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let r=await e.json();t(r)}catch(e){s("Unable to load provider status")}})()},[]),r)return(0,n.jsx)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:r});if(!e)return null;let l=[];return(e.openaiConfigured||l.push("OpenAI"),e.openrouterConfigured||l.push("OpenRouter"),0===l.length)?null:(0,n.jsxs)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:["Missing provider configuration: ",l.join(", "),". Some features may be limited."]})}},5694:function(e,t,r){"use strict";r.d(t,{U:function(){return s}});var n=r(7437),a=r(2265);function s(e){var t;let{provider:r,model:s,onChange:l}=e,[o,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let t=await e.json();i(t)}catch(e){i({openaiConfigured:!1,openrouterConfigured:!1,allowedModels:[]})}})()},[]);let d=(null==o?void 0:null===(t=o.allowedModels)||void 0===t?void 0:t.length)?o.allowedModels:[];return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"space-x-2",children:(0,n.jsxs)("label",{children:["Provider",(0,n.jsxs)("select",{value:r,onChange:e=>l({provider:e.target.value,model:s}),className:"ml-2 border p-1","data-testid":"pms-provider",children:[(0,n.jsx)("option",{value:"openai",children:"openai"}),(0,n.jsx)("option",{value:"openrouter",children:"openrouter"})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Model",d.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("select",{value:s,onChange:e=>l({provider:r,model:e.target.value}),className:"ml-2 border p-1","data-testid":"pms-model",children:d.map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("input",{type:"hidden",value:s,"data-testid":"pms-model-input",readOnly:!0})]}):(0,n.jsx)("input",{value:s,onChange:e=>l({provider:r,model:e.target.value}),className:"ml-2 border p-1","data-testid":"pms-model-input"})]})})]})}},9733:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(7437),a=r(2265),s=r(4839);let l=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:l="md",...o}=e;return(0,n.jsx)("button",{ref:t,className:(0,s.Z)("inline-flex items-center justify-center rounded transition-colors disabled:opacity-50 disabled:pointer-events-none","sm"===l&&"px-2 py-1 text-sm","md"===l&&"px-3 py-2 text-sm","lg"===l&&"px-4 py-2 text-base","default"===a&&"bg-blue-600 text-white hover:bg-blue-500","secondary"===a&&"bg-slate-700 text-slate-100 hover:bg-slate-600","ghost"===a&&"bg-transparent text-slate-100 hover:bg-slate-800","destructive"===a&&"bg-red-600 text-white hover:bg-red-500","outline"===a&&"border border-slate-700 text-slate-100 hover:bg-slate-800",r),...o})});l.displayName="Button"},7209:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(7437),a=r(2265),s=r(4839);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("input",{ref:t,className:(0,s.Z)("w-full rounded bg-slate-800 px-3 py-2 text-sm outline-none ring-blue-500 focus:ring-2",r),...a})});l.displayName="Input"},4839:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8686)}),_N_E=e.O()}]);