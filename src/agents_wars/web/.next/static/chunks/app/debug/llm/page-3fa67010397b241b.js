(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{8686:function(e,t,a){Promise.resolve().then(a.bind(a,1505))},1505:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var n=a(7437),s=a(2265),r=a(9547),l=a(5694);function i(){let[e,t]=(0,s.useState)("openai"),[a,i]=(0,s.useState)("gpt-4o"),[o,d]=(0,s.useState)("Hello"),[c,u]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),m=async t=>{t.preventDefault(),u("");let n=[{role:"user",content:o}];if(p){let t=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:a,messages:n,stream:!0})});if(!t.body){u("No stream body");return}let s=t.body.getReader(),r=new TextDecoder;for(;;){let{done:e,value:t}=await s.read();if(e)break;let a=r.decode(t,{stream:!0});u(e=>e+a)}return}let s=await fetch("/api/llm/chat",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({provider:e,model:a,messages:n})});u(JSON.stringify(await s.json(),null,2))};return(0,n.jsxs)("main",{className:"space-y-4 p-6",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"LLM Debug"}),(0,n.jsx)(r.x,{}),(0,n.jsxs)("form",{onSubmit:m,className:"space-y-2",children:[(0,n.jsx)(l.U,{provider:e,model:a,onChange:e=>{t(e.provider),i(e.model)}}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Prompt",(0,n.jsx)("input",{value:o,onChange:e=>d(e.target.value),className:"ml-2 w-80 border p-1"})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:"space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:p,onChange:e=>h(e.target.checked)}),(0,n.jsx)("span",{children:"Stream"})]})}),(0,n.jsx)("button",{type:"submit",className:"border px-3 py-1",children:"Send"})]}),(0,n.jsx)("pre",{className:"min-h-24 whitespace-pre-wrap break-words border p-2",children:c})]})}},9547:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});var n=a(7437),s=a(2265);function r(){let[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let a=await e.json();t(a)}catch(e){r("Unable to load provider status")}})()},[]),a)return(0,n.jsx)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:a});if(!e)return null;let l=[];return(e.openaiConfigured||l.push("OpenAI"),e.openrouterConfigured||l.push("OpenRouter"),0===l.length)?null:(0,n.jsxs)("div",{className:"border bg-yellow-50 p-2 text-sm text-yellow-800",children:["Missing provider configuration: ",l.join(", "),". Some features may be limited."]})}},5694:function(e,t,a){"use strict";a.d(t,{U:function(){return r}});var n=a(7437),s=a(2265);function r(e){var t;let{provider:a,model:r,onChange:l}=e,[i,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/config/provider-status");if(!e.ok)throw Error("status_failed");let t=await e.json();o(t)}catch(e){o({openaiConfigured:!1,openrouterConfigured:!1,allowedModels:[]})}})()},[]);let d=(null==i?void 0:null===(t=i.allowedModels)||void 0===t?void 0:t.length)?i.allowedModels:[];return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"space-x-2",children:(0,n.jsxs)("label",{children:["Provider",(0,n.jsxs)("select",{value:a,onChange:e=>l({provider:e.target.value,model:r}),className:"ml-2 border p-1","data-testid":"pms-provider",children:[(0,n.jsx)("option",{value:"openai",children:"openai"}),(0,n.jsx)("option",{value:"openrouter",children:"openrouter"})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Model",d.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("select",{value:r,onChange:e=>l({provider:a,model:e.target.value}),className:"ml-2 border p-1","data-testid":"pms-model",children:d.map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("input",{type:"hidden",value:r,"data-testid":"pms-model-input",readOnly:!0})]}):(0,n.jsx)("input",{value:r,onChange:e=>l({provider:a,model:e.target.value}),className:"ml-2 border p-1","data-testid":"pms-model-input"})]})})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8686)}),_N_E=e.O()}]);