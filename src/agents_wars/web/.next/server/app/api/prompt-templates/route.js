"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/prompt-templates/route";
exports.ids = ["app/api/prompt-templates/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt-templates%2Froute&page=%2Fapi%2Fprompt-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt-templates%2Froute.ts&appDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt-templates%2Froute&page=%2Fapi%2Fprompt-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt-templates%2Froute.ts&appDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_baramsalem_agents_repo_agents_src_agents_wars_web_app_api_prompt_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/prompt-templates/route.ts */ \"(rsc)/./app/api/prompt-templates/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/prompt-templates/route\",\n        pathname: \"/api/prompt-templates\",\n        filename: \"route\",\n        bundlePath: \"app/api/prompt-templates/route\"\n    },\n    resolvedPagePath: \"/Users/baramsalem/agents-repo/agents/src/agents_wars/web/app/api/prompt-templates/route.ts\",\n    nextConfigOutput,\n    userland: _Users_baramsalem_agents_repo_agents_src_agents_wars_web_app_api_prompt_templates_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/prompt-templates/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9tcHQtdGVtcGxhdGVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9tcHQtdGVtcGxhdGVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvbXB0LXRlbXBsYXRlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJhcmFtc2FsZW0lMkZhZ2VudHMtcmVwbyUyRmFnZW50cyUyRnNyYyUyRmFnZW50c193YXJzJTJGd2ViJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmJhcmFtc2FsZW0lMkZhZ2VudHMtcmVwbyUyRmFnZW50cyUyRnNyYyUyRmFnZW50c193YXJzJTJGd2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FnZW50LXdhcnMtd2ViLz83OTRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9iYXJhbXNhbGVtL2FnZW50cy1yZXBvL2FnZW50cy9zcmMvYWdlbnRzX3dhcnMvd2ViL2FwcC9hcGkvcHJvbXB0LXRlbXBsYXRlcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvbXB0LXRlbXBsYXRlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb21wdC10ZW1wbGF0ZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb21wdC10ZW1wbGF0ZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYmFyYW1zYWxlbS9hZ2VudHMtcmVwby9hZ2VudHMvc3JjL2FnZW50c193YXJzL3dlYi9hcHAvYXBpL3Byb21wdC10ZW1wbGF0ZXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb21wdC10ZW1wbGF0ZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt-templates%2Froute&page=%2Fapi%2Fprompt-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt-templates%2Froute.ts&appDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/prompt-templates/route.ts":
/*!*******************************************!*\
  !*** ./app/api/prompt-templates/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _repo_promptTemplates__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/repo/promptTemplates */ \"(rsc)/./src/repo/promptTemplates.ts\");\n/* harmony import */ var _lib_llm_guards__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/llm/guards */ \"(rsc)/./src/lib/llm/guards.ts\");\n\n\n\nasync function GET() {\n    const items = await (0,_repo_promptTemplates__WEBPACK_IMPORTED_MODULE_0__.listPromptTemplates)();\n    return new Response(JSON.stringify({\n        templates: items\n    }), {\n        status: 200,\n        headers: {\n            \"content-type\": \"application/json\"\n        }\n    });\n}\nconst postSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().trim().min(1).max(120),\n    description: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().trim().max(1000).optional(),\n    template: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().trim().min(1).max(20000),\n    variables: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string().trim().min(1)).max(100).default([])\n});\nasync function POST(req) {\n    try {\n        // Simple per-IP limiter for template writes\n        const ip = req.headers.get(\"x-forwarded-for\")?.split(\",\")[0]?.trim() || \"local\";\n        try {\n            (0,_lib_llm_guards__WEBPACK_IMPORTED_MODULE_1__.rateLimit)(`ip:${ip}:prompt-template`);\n        } catch (e) {\n            if (e instanceof _lib_llm_guards__WEBPACK_IMPORTED_MODULE_1__.GuardrailsError) {\n                return new Response(JSON.stringify({\n                    error: \"rate_limited\"\n                }), {\n                    status: 429,\n                    headers: {\n                        \"content-type\": \"application/json\"\n                    }\n                });\n            }\n            throw e;\n        }\n        const json = await req.json();\n        const parsed = postSchema.safeParse(json);\n        if (!parsed.success) {\n            return new Response(JSON.stringify({\n                error: \"invalid_body\",\n                details: parsed.error.flatten()\n            }), {\n                status: 400,\n                headers: {\n                    \"content-type\": \"application/json\"\n                }\n            });\n        }\n        const saved = await (0,_repo_promptTemplates__WEBPACK_IMPORTED_MODULE_0__.upsertPromptTemplate)(parsed.data);\n        return new Response(JSON.stringify({\n            template: saved\n        }), {\n            status: 200,\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        });\n    } catch  {\n        return new Response(JSON.stringify({\n            error: \"internal_error\"\n        }), {\n            status: 500,\n            headers: {\n                \"content-type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb21wdC10ZW1wbGF0ZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDd0I7QUFDMkQ7QUFDckI7QUFFdkQsZUFBZUs7SUFDcEIsTUFBTUMsUUFBUSxNQUFNSiwwRUFBbUJBO0lBQ3ZDLE9BQU8sSUFBSUssU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1FBQUVDLFdBQVdKO0lBQU0sSUFBSTtRQUN4REssUUFBUTtRQUNSQyxTQUFTO1lBQUUsZ0JBQWdCO1FBQW1CO0lBQ2hEO0FBQ0Y7QUFFQSxNQUFNQyxhQUFhYixrQ0FBQ0EsQ0FBQ2MsTUFBTSxDQUFDO0lBQzFCQyxNQUFNZixrQ0FBQ0EsQ0FBQ2dCLE1BQU0sR0FBR0MsSUFBSSxHQUFHQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQ25DQyxhQUFhcEIsa0NBQUNBLENBQUNnQixNQUFNLEdBQUdDLElBQUksR0FBR0UsR0FBRyxDQUFDLE1BQU1FLFFBQVE7SUFDakRDLFVBQVV0QixrQ0FBQ0EsQ0FBQ2dCLE1BQU0sR0FBR0MsSUFBSSxHQUFHQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQ3ZDSSxXQUFXdkIsa0NBQUNBLENBQUN3QixLQUFLLENBQUN4QixrQ0FBQ0EsQ0FBQ2dCLE1BQU0sR0FBR0MsSUFBSSxHQUFHQyxHQUFHLENBQUMsSUFBSUMsR0FBRyxDQUFDLEtBQUtNLE9BQU8sQ0FBQyxFQUFFO0FBQ2xFO0FBRU8sZUFBZUMsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLDRDQUE0QztRQUM1QyxNQUFNQyxLQUFLRCxJQUFJZixPQUFPLENBQUNpQixHQUFHLENBQUMsb0JBQW9CQyxNQUFNLElBQUksQ0FBQyxFQUFFLEVBQUViLFVBQVU7UUFDeEUsSUFBSTtZQUNGYiwwREFBU0EsQ0FBQyxDQUFDLEdBQUcsRUFBRXdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDdEMsRUFBRSxPQUFPRyxHQUFHO1lBQ1YsSUFBSUEsYUFBYTVCLDREQUFlQSxFQUFFO2dCQUNoQyxPQUFPLElBQUlJLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztvQkFBRXVCLE9BQU87Z0JBQWUsSUFBSTtvQkFDN0RyQixRQUFRO29CQUNSQyxTQUFTO3dCQUFFLGdCQUFnQjtvQkFBbUI7Z0JBQ2hEO1lBQ0Y7WUFDQSxNQUFNbUI7UUFDUjtRQUVBLE1BQU1FLE9BQU8sTUFBTU4sSUFBSU0sSUFBSTtRQUMzQixNQUFNQyxTQUFTckIsV0FBV3NCLFNBQVMsQ0FBQ0Y7UUFDcEMsSUFBSSxDQUFDQyxPQUFPRSxPQUFPLEVBQUU7WUFDbkIsT0FBTyxJQUFJN0IsU0FDVEMsS0FBS0MsU0FBUyxDQUFDO2dCQUFFdUIsT0FBTztnQkFBZ0JLLFNBQVNILE9BQU9GLEtBQUssQ0FBQ00sT0FBTztZQUFHLElBQ3hFO2dCQUFFM0IsUUFBUTtnQkFBS0MsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO1lBQUU7UUFFbkU7UUFDQSxNQUFNMkIsUUFBUSxNQUFNdEMsMkVBQW9CQSxDQUFDaUMsT0FBT00sSUFBSTtRQUNwRCxPQUFPLElBQUlqQyxTQUFTQyxLQUFLQyxTQUFTLENBQUM7WUFBRWEsVUFBVWlCO1FBQU0sSUFBSTtZQUN2RDVCLFFBQVE7WUFDUkMsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7SUFDRixFQUFFLE9BQU07UUFDTixPQUFPLElBQUlMLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUFFdUIsT0FBTztRQUFpQixJQUFJO1lBQy9EckIsUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtZQUFtQjtRQUNoRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ2VudC13YXJzLXdlYi8uL2FwcC9hcGkvcHJvbXB0LXRlbXBsYXRlcy9yb3V0ZS50cz84NWQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgdXBzZXJ0UHJvbXB0VGVtcGxhdGUsIGxpc3RQcm9tcHRUZW1wbGF0ZXMgfSBmcm9tIFwiQC9yZXBvL3Byb21wdFRlbXBsYXRlc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsc0Vycm9yLCByYXRlTGltaXQgfSBmcm9tIFwiQC9saWIvbGxtL2d1YXJkc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICBjb25zdCBpdGVtcyA9IGF3YWl0IGxpc3RQcm9tcHRUZW1wbGF0ZXMoKTtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHRlbXBsYXRlczogaXRlbXMgfSksIHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gIH0pO1xufVxuXG5jb25zdCBwb3N0U2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLnRyaW0oKS5taW4oMSkubWF4KDEyMCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLnRyaW0oKS5tYXgoMTAwMCkub3B0aW9uYWwoKSxcbiAgdGVtcGxhdGU6IHouc3RyaW5nKCkudHJpbSgpLm1pbigxKS5tYXgoMjAwMDApLFxuICB2YXJpYWJsZXM6IHouYXJyYXkoei5zdHJpbmcoKS50cmltKCkubWluKDEpKS5tYXgoMTAwKS5kZWZhdWx0KFtdKSxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gU2ltcGxlIHBlci1JUCBsaW1pdGVyIGZvciB0ZW1wbGF0ZSB3cml0ZXNcbiAgICBjb25zdCBpcCA9IHJlcS5oZWFkZXJzLmdldChcIngtZm9yd2FyZGVkLWZvclwiKT8uc3BsaXQoXCIsXCIpWzBdPy50cmltKCkgfHwgXCJsb2NhbFwiO1xuICAgIHRyeSB7XG4gICAgICByYXRlTGltaXQoYGlwOiR7aXB9OnByb21wdC10ZW1wbGF0ZWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgR3VhcmRyYWlsc0Vycm9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogXCJyYXRlX2xpbWl0ZWRcIiB9KSwge1xuICAgICAgICAgIHN0YXR1czogNDI5LFxuICAgICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHBvc3RTY2hlbWEuc2FmZVBhcnNlKGpzb24pO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IFwiaW52YWxpZF9ib2R5XCIsIGRldGFpbHM6IHBhcnNlZC5lcnJvci5mbGF0dGVuKCkgfSksXG4gICAgICAgIHsgc3RhdHVzOiA0MDAsIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSB9LFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgc2F2ZWQgPSBhd2FpdCB1cHNlcnRQcm9tcHRUZW1wbGF0ZShwYXJzZWQuZGF0YSk7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IHRlbXBsYXRlOiBzYXZlZCB9KSwge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogXCJpbnRlcm5hbF9lcnJvclwiIH0pLCB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInoiLCJ1cHNlcnRQcm9tcHRUZW1wbGF0ZSIsImxpc3RQcm9tcHRUZW1wbGF0ZXMiLCJHdWFyZHJhaWxzRXJyb3IiLCJyYXRlTGltaXQiLCJHRVQiLCJpdGVtcyIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInRlbXBsYXRlcyIsInN0YXR1cyIsImhlYWRlcnMiLCJwb3N0U2NoZW1hIiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsInRyaW0iLCJtaW4iLCJtYXgiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwidGVtcGxhdGUiLCJ2YXJpYWJsZXMiLCJhcnJheSIsImRlZmF1bHQiLCJQT1NUIiwicmVxIiwiaXAiLCJnZXQiLCJzcGxpdCIsImUiLCJlcnJvciIsImpzb24iLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGV0YWlscyIsImZsYXR0ZW4iLCJzYXZlZCIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/prompt-templates/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/config.ts":
/*!***************************!*\
  !*** ./src/lib/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __clearConfigCache: () => (/* binding */ __clearConfigCache),\n/* harmony export */   getConfig: () => (/* binding */ getConfig)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\nconst optionalNonEmpty = (schema)=>zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((v)=>typeof v === \"string\" && v.trim().length === 0 ? undefined : v, schema.optional());\nconst envSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    OPENAI_API_KEY: optionalNonEmpty(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim().min(1)),\n    OPENROUTER_API_KEY: optionalNonEmpty(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim().min(1)),\n    OPENROUTER_SITE: optionalNonEmpty(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim()),\n    ALLOWED_MODELS: optionalNonEmpty(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim()),\n    SUMMARIZER_MODEL: optionalNonEmpty(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim()),\n    MAX_TOKENS_PER_CALL: zod__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number().int().positive().default(512),\n    MAX_MESSAGES_PER_CONVO: zod__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number().int().positive().default(25),\n    RATE_LIMIT_ENABLED: zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n    ]).transform((v)=>typeof v === \"string\" ? v.toLowerCase() !== \"false\" : !!v).default(true),\n    RATE_LIMIT_RPM: zod__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number().int().positive().default(60),\n    REQUEST_TIMEOUT_MS: zod__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number().int().positive().default(60000),\n    MAX_USD_PER_CONVO: zod__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number().nonnegative().optional()\n}).refine((v)=>Boolean(v.OPENAI_API_KEY || v.OPENROUTER_API_KEY), \"At least one provider key must be set: OPENAI_API_KEY or OPENROUTER_API_KEY\");\nlet cached;\nfunction getConfig() {\n    if (cached) return cached;\n    // In test env, allow missing provider keys by injecting a dummy key\n    const env = {\n        ...process.env\n    };\n    if (false) {}\n    const parsed = envSchema.parse(env);\n    cached = {\n        openaiApiKey: parsed.OPENAI_API_KEY || undefined,\n        openrouterApiKey: parsed.OPENROUTER_API_KEY || undefined,\n        openrouterSite: parsed.OPENROUTER_SITE || undefined,\n        allowedModels: parsed.ALLOWED_MODELS ? parsed.ALLOWED_MODELS.split(\",\").map((s)=>s.trim()).filter(Boolean) : [],\n        summarizerModel: parsed.SUMMARIZER_MODEL || undefined,\n        maxTokensPerCall: parsed.MAX_TOKENS_PER_CALL,\n        maxMessagesPerConversation: parsed.MAX_MESSAGES_PER_CONVO,\n        rateLimitEnabled: parsed.RATE_LIMIT_ENABLED,\n        rateLimitRpm: parsed.RATE_LIMIT_RPM,\n        requestTimeoutMs: parsed.REQUEST_TIMEOUT_MS,\n        maxUsdPerConversation: parsed.MAX_USD_PER_CONVO,\n        redisUrl: env.REDIS_URL || undefined\n    };\n    return cached;\n}\n// Test-only utility to reset cached config between test cases\nfunction __clearConfigCache() {\n    cached = undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9ULGtCQUFrQjtRQUMzQ3lCLHVCQUF1QmhCLE9BQU9SLGlCQUFpQjtRQUMvQ3lCLFVBQVVuQixJQUFJb0IsU0FBUyxJQUFJbkQ7SUFDN0I7SUFDQSxPQUFPNkI7QUFDVDtBQUVBLDhEQUE4RDtBQUN2RCxTQUFTdUI7SUFDZHZCLFNBQVM3QjtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWdlbnQtd2Fycy13ZWIvLi9zcmMvbGliL2NvbmZpZy50cz9hM2VmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmNvbnN0IG9wdGlvbmFsTm9uRW1wdHkgPSAoc2NoZW1hOiB6LlpvZFR5cGVBbnkpID0+XG4gIHoucHJlcHJvY2VzcyhcbiAgICAodikgPT4gKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiICYmIHYudHJpbSgpLmxlbmd0aCA9PT0gMCA/IHVuZGVmaW5lZCA6IHYpLFxuICAgIHNjaGVtYS5vcHRpb25hbCgpLFxuICApO1xuXG5jb25zdCBlbnZTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIE9QRU5BSV9BUElfS0VZOiBvcHRpb25hbE5vbkVtcHR5KHouc3RyaW5nKCkudHJpbSgpLm1pbigxKSksXG4gICAgT1BFTlJPVVRFUl9BUElfS0VZOiBvcHRpb25hbE5vbkVtcHR5KHouc3RyaW5nKCkudHJpbSgpLm1pbigxKSksXG4gICAgT1BFTlJPVVRFUl9TSVRFOiBvcHRpb25hbE5vbkVtcHR5KHouc3RyaW5nKCkudHJpbSgpKSxcbiAgICBBTExPV0VEX01PREVMUzogb3B0aW9uYWxOb25FbXB0eSh6LnN0cmluZygpLnRyaW0oKSksXG4gICAgU1VNTUFSSVpFUl9NT0RFTDogb3B0aW9uYWxOb25FbXB0eSh6LnN0cmluZygpLnRyaW0oKSksXG4gICAgTUFYX1RPS0VOU19QRVJfQ0FMTDogei5jb2VyY2UubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5kZWZhdWx0KDUxMiksXG4gICAgTUFYX01FU1NBR0VTX1BFUl9DT05WTzogei5jb2VyY2UubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5kZWZhdWx0KDI1KSxcbiAgICBSQVRFX0xJTUlUX0VOQUJMRUQ6IHpcbiAgICAgIC51bmlvbihbei5zdHJpbmcoKSwgei5ib29sZWFuKCldKVxuICAgICAgLnRyYW5zZm9ybSgodikgPT4gKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiID8gdi50b0xvd2VyQ2FzZSgpICE9PSBcImZhbHNlXCIgOiAhIXYpKVxuICAgICAgLmRlZmF1bHQodHJ1ZSksXG4gICAgUkFURV9MSU1JVF9SUE06IHouY29lcmNlLm51bWJlcigpLmludCgpLnBvc2l0aXZlKCkuZGVmYXVsdCg2MCksXG4gICAgUkVRVUVTVF9USU1FT1VUX01TOiB6LmNvZXJjZS5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLmRlZmF1bHQoNjAwMDApLFxuICAgIE1BWF9VU0RfUEVSX0NPTlZPOiB6LmNvZXJjZS5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5yZWZpbmUoXG4gICAgKHYpID0+IEJvb2xlYW4odi5PUEVOQUlfQVBJX0tFWSB8fCB2Lk9QRU5ST1VURVJfQVBJX0tFWSksXG4gICAgXCJBdCBsZWFzdCBvbmUgcHJvdmlkZXIga2V5IG11c3QgYmUgc2V0OiBPUEVOQUlfQVBJX0tFWSBvciBPUEVOUk9VVEVSX0FQSV9LRVlcIixcbiAgKTtcblxuLy8gTm90ZTogV2UgYXZvaWQgbWVyZ2luZyBkdWUgdG8gWm9kIGVmZmVjdHMgdHlwaW5nOyByZWFkIFJFRElTX1VSTCBkaXJlY3RseSBmcm9tIHByb2Nlc3MuZW52XG5cbmV4cG9ydCB0eXBlIEFwcENvbmZpZyA9IHtcbiAgb3BlbmFpQXBpS2V5Pzogc3RyaW5nO1xuICBvcGVucm91dGVyQXBpS2V5Pzogc3RyaW5nO1xuICBvcGVucm91dGVyU2l0ZT86IHN0cmluZztcbiAgYWxsb3dlZE1vZGVsczogc3RyaW5nW107XG4gIHN1bW1hcml6ZXJNb2RlbD86IHN0cmluZztcbiAgbWF4VG9rZW5zUGVyQ2FsbDogbnVtYmVyO1xuICBtYXhNZXNzYWdlc1BlckNvbnZlcnNhdGlvbjogbnVtYmVyO1xuICByYXRlTGltaXRFbmFibGVkOiBib29sZWFuO1xuICByYXRlTGltaXRScG06IG51bWJlcjtcbiAgcmVxdWVzdFRpbWVvdXRNczogbnVtYmVyO1xuICBtYXhVc2RQZXJDb252ZXJzYXRpb24/OiBudW1iZXI7XG4gIHJlZGlzVXJsPzogc3RyaW5nO1xufTtcblxubGV0IGNhY2hlZDogQXBwQ29uZmlnIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKCk6IEFwcENvbmZpZyB7XG4gIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG4gIC8vIEluIHRlc3QgZW52LCBhbGxvdyBtaXNzaW5nIHByb3ZpZGVyIGtleXMgYnkgaW5qZWN0aW5nIGEgZHVtbXkga2V5XG4gIGNvbnN0IGVudiA9IHsgLi4ucHJvY2Vzcy5lbnYgfSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiICYmICFlbnYuT1BFTkFJX0FQSV9LRVkgJiYgIWVudi5PUEVOUk9VVEVSX0FQSV9LRVkpIHtcbiAgICBlbnYuT1BFTkFJX0FQSV9LRVkgPSBcInRlc3Qta2V5XCI7XG4gIH1cbiAgY29uc3QgcGFyc2VkID0gZW52U2NoZW1hLnBhcnNlKGVudik7XG4gIGNhY2hlZCA9IHtcbiAgICBvcGVuYWlBcGlLZXk6IHBhcnNlZC5PUEVOQUlfQVBJX0tFWSB8fCB1bmRlZmluZWQsXG4gICAgb3BlbnJvdXRlckFwaUtleTogcGFyc2VkLk9QRU5ST1VURVJfQVBJX0tFWSB8fCB1bmRlZmluZWQsXG4gICAgb3BlbnJvdXRlclNpdGU6IHBhcnNlZC5PUEVOUk9VVEVSX1NJVEUgfHwgdW5kZWZpbmVkLFxuICAgIGFsbG93ZWRNb2RlbHM6IHBhcnNlZC5BTExPV0VEX01PREVMU1xuICAgICAgPyBwYXJzZWQuQUxMT1dFRF9NT0RFTFMuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgLm1hcCgoczogc3RyaW5nKSA9PiBzLnRyaW0oKSlcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICA6IFtdLFxuICAgIHN1bW1hcml6ZXJNb2RlbDogcGFyc2VkLlNVTU1BUklaRVJfTU9ERUwgfHwgdW5kZWZpbmVkLFxuICAgIG1heFRva2Vuc1BlckNhbGw6IHBhcnNlZC5NQVhfVE9LRU5TX1BFUl9DQUxMLFxuICAgIG1heE1lc3NhZ2VzUGVyQ29udmVyc2F0aW9uOiBwYXJzZWQuTUFYX01FU1NBR0VTX1BFUl9DT05WTyxcbiAgICByYXRlTGltaXRFbmFibGVkOiBwYXJzZWQuUkFURV9MSU1JVF9FTkFCTEVELFxuICAgIHJhdGVMaW1pdFJwbTogcGFyc2VkLlJBVEVfTElNSVRfUlBNLFxuICAgIHJlcXVlc3RUaW1lb3V0TXM6IHBhcnNlZC5SRVFVRVNUX1RJTUVPVVRfTVMsXG4gICAgbWF4VXNkUGVyQ29udmVyc2F0aW9uOiBwYXJzZWQuTUFYX1VTRF9QRVJfQ09OVk8sXG4gICAgcmVkaXNVcmw6IGVudi5SRURJU19VUkwgfHwgdW5kZWZpbmVkLFxuICB9O1xuICByZXR1cm4gY2FjaGVkO1xufVxuXG4vLyBUZXN0LW9ubHkgdXRpbGl0eSB0byByZXNldCBjYWNoZWQgY29uZmlnIGJldHdlZW4gdGVzdCBjYXNlc1xuZXhwb3J0IGZ1bmN0aW9uIF9fY2xlYXJDb25maWdDYWNoZSgpOiB2b2lkIHtcbiAgY2FjaGVkID0gdW5kZWZpbmVkO1xufVxuIl0sIm5hbWVzIjpbInoiLCJvcHRpb25hbE5vbkVtcHR5Iiwic2NoZW1hIiwicHJlcHJvY2VzcyIsInYiLCJ0cmltIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwib3B0aW9uYWwiLCJlbnZTY2hlbWEiLCJvYmplY3QiLCJPUEVOQUlfQVBJX0tFWSIsInN0cmluZyIsIm1pbiIsIk9QRU5ST1VURVJfQVBJX0tFWSIsIk9QRU5ST1VURVJfU0lURSIsIkFMTE9XRURfTU9ERUxTIiwiU1VNTUFSSVpFUl9NT0RFTCIsIk1BWF9UT0tFTlNfUEVSX0NBTEwiLCJjb2VyY2UiLCJudW1iZXIiLCJpbnQiLCJwb3NpdGl2ZSIsImRlZmF1bHQiLCJNQVhfTUVTU0FHRVNfUEVSX0NPTlZPIiwiUkFURV9MSU1JVF9FTkFCTEVEIiwidW5pb24iLCJib29sZWFuIiwidHJhbnNmb3JtIiwidG9Mb3dlckNhc2UiLCJSQVRFX0xJTUlUX1JQTSIsIlJFUVVFU1RfVElNRU9VVF9NUyIsIk1BWF9VU0RfUEVSX0NPTlZPIiwibm9ubmVnYXRpdmUiLCJyZWZpbmUiLCJCb29sZWFuIiwiY2FjaGVkIiwiZ2V0Q29uZmlnIiwiZW52IiwicHJvY2VzcyIsInBhcnNlZCIsInBhcnNlIiwib3BlbmFpQXBpS2V5Iiwib3BlbnJvdXRlckFwaUtleSIsIm9wZW5yb3V0ZXJTaXRlIiwiYWxsb3dlZE1vZGVscyIsInNwbGl0IiwibWFwIiwicyIsImZpbHRlciIsInN1bW1hcml6ZXJNb2RlbCIsIm1heFRva2Vuc1BlckNhbGwiLCJtYXhNZXNzYWdlc1BlckNvbnZlcnNhdGlvbiIsInJhdGVMaW1pdEVuYWJsZWQiLCJyYXRlTGltaXRScG0iLCJyZXF1ZXN0VGltZW91dE1zIiwibWF4VXNkUGVyQ29udmVyc2F0aW9uIiwicmVkaXNVcmwiLCJSRURJU19VUkwiLCJfX2NsZWFyQ29uZmlnQ2FjaGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/llm/guards.ts":
/*!*******************************!*\
  !*** ./src/lib/llm/guards.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GuardrailsError: () => (/* binding */ GuardrailsError),\n/* harmony export */   computeBackoffDelayMs: () => (/* binding */ computeBackoffDelayMs),\n/* harmony export */   enforceCaps: () => (/* binding */ enforceCaps),\n/* harmony export */   getAllowedModels: () => (/* binding */ getAllowedModels),\n/* harmony export */   getMaxMessagesPerConversation: () => (/* binding */ getMaxMessagesPerConversation),\n/* harmony export */   getMaxTokensPerCall: () => (/* binding */ getMaxTokensPerCall),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/config */ \"(rsc)/./src/lib/config.ts\");\n\nfunction getAllowedModels() {\n    const cfg = (0,_lib_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\n    return new Set(cfg.allowedModels);\n}\nfunction getMaxTokensPerCall() {\n    return (0,_lib_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)().maxTokensPerCall;\n}\nfunction getMaxMessagesPerConversation() {\n    return (0,_lib_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)().maxMessagesPerConversation;\n}\nclass GuardrailsError extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"GuardrailsError\";\n    }\n}\nfunction enforceCaps(args) {\n    const maxTokens = getMaxTokensPerCall();\n    if ((args.requestedMaxTokens ?? maxTokens) > maxTokens) {\n        throw new GuardrailsError(`maxTokens exceeds cap (${args.requestedMaxTokens} > ${maxTokens})`);\n    }\n    const maxMsgs = getMaxMessagesPerConversation();\n    if (args.messageCount > maxMsgs) {\n        throw new GuardrailsError(`message count exceeds cap (${args.messageCount} > ${maxMsgs})`);\n    }\n    const allowed = getAllowedModels();\n    if (allowed.size > 0 && !allowed.has(args.model)) {\n        throw new GuardrailsError(`model not allowed: ${args.model}`);\n    }\n}\nconst limiterStore = new Map();\nfunction rateLimit(key) {\n    const cfg = (0,_lib_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\n    if (!cfg.rateLimitEnabled) return;\n    const maxPerWindow = cfg.rateLimitRpm;\n    const now = Date.now();\n    const windowMs = 60000;\n    const w = limiterStore.get(key);\n    if (!w || now - w.windowStartMs >= windowMs) {\n        limiterStore.set(key, {\n            count: 1,\n            windowStartMs: now\n        });\n        return;\n    }\n    if (w.count >= maxPerWindow) {\n        throw new GuardrailsError(\"rate limit exceeded\");\n    }\n    w.count += 1;\n}\nasync function sleep(ms) {\n    await new Promise((res)=>setTimeout(res, ms));\n}\nfunction computeBackoffDelayMs(attempt) {\n    // attempt: 0,1,2 -> 250ms, 750ms, 1250ms with jitter\n    const base = 250 + attempt * 500;\n    const jitter = Math.floor(Math.random() * 100);\n    return base + jitter;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2xsbS9ndWFyZHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXlDO0FBRWxDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUYsc0RBQVNBO0lBQ3JCLE9BQU8sSUFBSUcsSUFBSUQsSUFBSUUsYUFBYTtBQUNsQztBQUVPLFNBQVNDO0lBQ2QsT0FBT0wsc0RBQVNBLEdBQUdNLGdCQUFnQjtBQUNyQztBQUVPLFNBQVNDO0lBQ2QsT0FBT1Asc0RBQVNBLEdBQUdRLDBCQUEwQjtBQUMvQztBQUVPLE1BQU1DLHdCQUF3QkM7SUFDbkNDLFlBQVlDLE9BQWUsQ0FBRTtRQUMzQixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sU0FBU0MsWUFBWUMsSUFJM0I7SUFDQyxNQUFNQyxZQUFZWDtJQUNsQixJQUFJLENBQUNVLEtBQUtFLGtCQUFrQixJQUFJRCxTQUFRLElBQUtBLFdBQVc7UUFDdEQsTUFBTSxJQUFJUCxnQkFBZ0IsQ0FBQyx1QkFBdUIsRUFBRU0sS0FBS0Usa0JBQWtCLENBQUMsR0FBRyxFQUFFRCxVQUFVLENBQUMsQ0FBQztJQUMvRjtJQUNBLE1BQU1FLFVBQVVYO0lBQ2hCLElBQUlRLEtBQUtJLFlBQVksR0FBR0QsU0FBUztRQUMvQixNQUFNLElBQUlULGdCQUFnQixDQUFDLDJCQUEyQixFQUFFTSxLQUFLSSxZQUFZLENBQUMsR0FBRyxFQUFFRCxRQUFRLENBQUMsQ0FBQztJQUMzRjtJQUNBLE1BQU1FLFVBQVVuQjtJQUNoQixJQUFJbUIsUUFBUUMsSUFBSSxHQUFHLEtBQUssQ0FBQ0QsUUFBUUUsR0FBRyxDQUFDUCxLQUFLUSxLQUFLLEdBQUc7UUFDaEQsTUFBTSxJQUFJZCxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRU0sS0FBS1EsS0FBSyxDQUFDLENBQUM7SUFDOUQ7QUFDRjtBQUdBLE1BQU1DLGVBQW9DLElBQUlDO0FBRXZDLFNBQVNDLFVBQVVDLEdBQVc7SUFDbkMsTUFBTXpCLE1BQU1GLHNEQUFTQTtJQUNyQixJQUFJLENBQUNFLElBQUkwQixnQkFBZ0IsRUFBRTtJQUMzQixNQUFNQyxlQUFlM0IsSUFBSTRCLFlBQVk7SUFDckMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixNQUFNRSxXQUFXO0lBQ2pCLE1BQU1DLElBQUlWLGFBQWFXLEdBQUcsQ0FBQ1I7SUFDM0IsSUFBSSxDQUFDTyxLQUFLSCxNQUFNRyxFQUFFRSxhQUFhLElBQUlILFVBQVU7UUFDM0NULGFBQWFhLEdBQUcsQ0FBQ1YsS0FBSztZQUFFVyxPQUFPO1lBQUdGLGVBQWVMO1FBQUk7UUFDckQ7SUFDRjtJQUNBLElBQUlHLEVBQUVJLEtBQUssSUFBSVQsY0FBYztRQUMzQixNQUFNLElBQUlwQixnQkFBZ0I7SUFDNUI7SUFDQXlCLEVBQUVJLEtBQUssSUFBSTtBQUNiO0FBRU8sZUFBZUMsTUFBTUMsRUFBVTtJQUNwQyxNQUFNLElBQUlDLFFBQVEsQ0FBQ0MsTUFBUUMsV0FBV0QsS0FBS0Y7QUFDN0M7QUFFTyxTQUFTSSxzQkFBc0JDLE9BQWU7SUFDbkQscURBQXFEO0lBQ3JELE1BQU1DLE9BQU8sTUFBTUQsVUFBVTtJQUM3QixNQUFNRSxTQUFTQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSztJQUMxQyxPQUFPSixPQUFPQztBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FnZW50LXdhcnMtd2ViLy4vc3JjL2xpYi9sbG0vZ3VhcmRzLnRzP2I5NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSBcIkAvbGliL2NvbmZpZ1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsb3dlZE1vZGVscygpOiBTZXQ8c3RyaW5nPiB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpO1xuICByZXR1cm4gbmV3IFNldChjZmcuYWxsb3dlZE1vZGVscyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhUb2tlbnNQZXJDYWxsKCk6IG51bWJlciB7XG4gIHJldHVybiBnZXRDb25maWcoKS5tYXhUb2tlbnNQZXJDYWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4TWVzc2FnZXNQZXJDb252ZXJzYXRpb24oKTogbnVtYmVyIHtcbiAgcmV0dXJuIGdldENvbmZpZygpLm1heE1lc3NhZ2VzUGVyQ29udmVyc2F0aW9uO1xufVxuXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsc0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkd1YXJkcmFpbHNFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmZvcmNlQ2FwcyhhcmdzOiB7XG4gIHJlcXVlc3RlZE1heFRva2VuczogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBtZXNzYWdlQ291bnQ6IG51bWJlcjtcbiAgbW9kZWw6IHN0cmluZztcbn0pOiB2b2lkIHtcbiAgY29uc3QgbWF4VG9rZW5zID0gZ2V0TWF4VG9rZW5zUGVyQ2FsbCgpO1xuICBpZiAoKGFyZ3MucmVxdWVzdGVkTWF4VG9rZW5zID8/IG1heFRva2VucykgPiBtYXhUb2tlbnMpIHtcbiAgICB0aHJvdyBuZXcgR3VhcmRyYWlsc0Vycm9yKGBtYXhUb2tlbnMgZXhjZWVkcyBjYXAgKCR7YXJncy5yZXF1ZXN0ZWRNYXhUb2tlbnN9ID4gJHttYXhUb2tlbnN9KWApO1xuICB9XG4gIGNvbnN0IG1heE1zZ3MgPSBnZXRNYXhNZXNzYWdlc1BlckNvbnZlcnNhdGlvbigpO1xuICBpZiAoYXJncy5tZXNzYWdlQ291bnQgPiBtYXhNc2dzKSB7XG4gICAgdGhyb3cgbmV3IEd1YXJkcmFpbHNFcnJvcihgbWVzc2FnZSBjb3VudCBleGNlZWRzIGNhcCAoJHthcmdzLm1lc3NhZ2VDb3VudH0gPiAke21heE1zZ3N9KWApO1xuICB9XG4gIGNvbnN0IGFsbG93ZWQgPSBnZXRBbGxvd2VkTW9kZWxzKCk7XG4gIGlmIChhbGxvd2VkLnNpemUgPiAwICYmICFhbGxvd2VkLmhhcyhhcmdzLm1vZGVsKSkge1xuICAgIHRocm93IG5ldyBHdWFyZHJhaWxzRXJyb3IoYG1vZGVsIG5vdCBhbGxvd2VkOiAke2FyZ3MubW9kZWx9YCk7XG4gIH1cbn1cblxudHlwZSBXaW5kb3cgPSB7IGNvdW50OiBudW1iZXI7IHdpbmRvd1N0YXJ0TXM6IG51bWJlciB9O1xuY29uc3QgbGltaXRlclN0b3JlOiBNYXA8c3RyaW5nLCBXaW5kb3c+ID0gbmV3IE1hcCgpO1xuXG5leHBvcnQgZnVuY3Rpb24gcmF0ZUxpbWl0KGtleTogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpO1xuICBpZiAoIWNmZy5yYXRlTGltaXRFbmFibGVkKSByZXR1cm47XG4gIGNvbnN0IG1heFBlcldpbmRvdyA9IGNmZy5yYXRlTGltaXRScG07XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IHdpbmRvd01zID0gNjBfMDAwO1xuICBjb25zdCB3ID0gbGltaXRlclN0b3JlLmdldChrZXkpO1xuICBpZiAoIXcgfHwgbm93IC0gdy53aW5kb3dTdGFydE1zID49IHdpbmRvd01zKSB7XG4gICAgbGltaXRlclN0b3JlLnNldChrZXksIHsgY291bnQ6IDEsIHdpbmRvd1N0YXJ0TXM6IG5vdyB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHcuY291bnQgPj0gbWF4UGVyV2luZG93KSB7XG4gICAgdGhyb3cgbmV3IEd1YXJkcmFpbHNFcnJvcihcInJhdGUgbGltaXQgZXhjZWVkZWRcIik7XG4gIH1cbiAgdy5jb3VudCArPSAxO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgbXMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVCYWNrb2ZmRGVsYXlNcyhhdHRlbXB0OiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBhdHRlbXB0OiAwLDEsMiAtPiAyNTBtcywgNzUwbXMsIDEyNTBtcyB3aXRoIGppdHRlclxuICBjb25zdCBiYXNlID0gMjUwICsgYXR0ZW1wdCAqIDUwMDtcbiAgY29uc3Qgaml0dGVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcbiAgcmV0dXJuIGJhc2UgKyBqaXR0ZXI7XG59XG4iXSwibmFtZXMiOlsiZ2V0Q29uZmlnIiwiZ2V0QWxsb3dlZE1vZGVscyIsImNmZyIsIlNldCIsImFsbG93ZWRNb2RlbHMiLCJnZXRNYXhUb2tlbnNQZXJDYWxsIiwibWF4VG9rZW5zUGVyQ2FsbCIsImdldE1heE1lc3NhZ2VzUGVyQ29udmVyc2F0aW9uIiwibWF4TWVzc2FnZXNQZXJDb252ZXJzYXRpb24iLCJHdWFyZHJhaWxzRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm5hbWUiLCJlbmZvcmNlQ2FwcyIsImFyZ3MiLCJtYXhUb2tlbnMiLCJyZXF1ZXN0ZWRNYXhUb2tlbnMiLCJtYXhNc2dzIiwibWVzc2FnZUNvdW50IiwiYWxsb3dlZCIsInNpemUiLCJoYXMiLCJtb2RlbCIsImxpbWl0ZXJTdG9yZSIsIk1hcCIsInJhdGVMaW1pdCIsImtleSIsInJhdGVMaW1pdEVuYWJsZWQiLCJtYXhQZXJXaW5kb3ciLCJyYXRlTGltaXRScG0iLCJub3ciLCJEYXRlIiwid2luZG93TXMiLCJ3IiwiZ2V0Iiwid2luZG93U3RhcnRNcyIsInNldCIsImNvdW50Iiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXMiLCJzZXRUaW1lb3V0IiwiY29tcHV0ZUJhY2tvZmZEZWxheU1zIiwiYXR0ZW1wdCIsImJhc2UiLCJqaXR0ZXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/llm/guards.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"error\",\n        \"warn\"\n    ]\n});\nif (true) global.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFPdkMsTUFBTUMsU0FDWEMsT0FBT0QsTUFBTSxJQUNiLElBQUlELHdEQUFZQSxDQUFDO0lBQ2ZHLEtBQUs7UUFBQztRQUFTO0tBQU87QUFDeEIsR0FBRztBQUVMLElBQUlDLElBQXFDLEVBQUVGLE9BQU9ELE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ2VudC13YXJzLXdlYi8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWE6IFByaXNtYUNsaWVudCA9XG4gIGdsb2JhbC5wcmlzbWEgPz9cbiAgbmV3IFByaXNtYUNsaWVudCh7XG4gICAgbG9nOiBbXCJlcnJvclwiLCBcIndhcm5cIl0sXG4gIH0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSBnbG9iYWwucHJpc21hID0gcHJpc21hO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSIsImdsb2JhbCIsImxvZyIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/repo/promptTemplates.ts":
/*!*************************************!*\
  !*** ./src/repo/promptTemplates.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPromptTemplateByName: () => (/* binding */ getPromptTemplateByName),\n/* harmony export */   listPromptTemplates: () => (/* binding */ listPromptTemplates),\n/* harmony export */   upsertPromptTemplate: () => (/* binding */ upsertPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nasync function upsertPromptTemplate(input) {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.promptTemplate.upsert({\n        where: {\n            name: input.name\n        },\n        update: {\n            description: input.description,\n            template: input.template,\n            variables: input.variables\n        },\n        create: {\n            name: input.name,\n            description: input.description,\n            template: input.template,\n            variables: input.variables\n        }\n    });\n}\nasync function listPromptTemplates() {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.promptTemplate.findMany({\n        orderBy: {\n            createdAt: \"desc\"\n        }\n    });\n}\nasync function getPromptTemplateByName(name) {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.promptTemplate.findUnique({\n        where: {\n            name\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvcmVwby9wcm9tcHRUZW1wbGF0ZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQUUvQixlQUFlQyxxQkFBcUJDLEtBSzFDO0lBQ0MsT0FBT0YsK0NBQU1BLENBQUNHLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDO1FBQ2xDQyxPQUFPO1lBQUVDLE1BQU1KLE1BQU1JLElBQUk7UUFBQztRQUMxQkMsUUFBUTtZQUNOQyxhQUFhTixNQUFNTSxXQUFXO1lBQzlCQyxVQUFVUCxNQUFNTyxRQUFRO1lBQ3hCQyxXQUFXUixNQUFNUSxTQUFTO1FBQzVCO1FBQ0FDLFFBQVE7WUFDTkwsTUFBTUosTUFBTUksSUFBSTtZQUNoQkUsYUFBYU4sTUFBTU0sV0FBVztZQUM5QkMsVUFBVVAsTUFBTU8sUUFBUTtZQUN4QkMsV0FBV1IsTUFBTVEsU0FBUztRQUM1QjtJQUNGO0FBQ0Y7QUFFTyxlQUFlRTtJQUNwQixPQUFPWiwrQ0FBTUEsQ0FBQ0csY0FBYyxDQUFDVSxRQUFRLENBQUM7UUFBRUMsU0FBUztZQUFFQyxXQUFXO1FBQU87SUFBRTtBQUN6RTtBQUVPLGVBQWVDLHdCQUF3QlYsSUFBWTtJQUN4RCxPQUFPTiwrQ0FBTUEsQ0FBQ0csY0FBYyxDQUFDYyxVQUFVLENBQUM7UUFBRVosT0FBTztZQUFFQztRQUFLO0lBQUU7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZ2VudC13YXJzLXdlYi8uL3NyYy9yZXBvL3Byb21wdFRlbXBsYXRlcy50cz82NmY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydFByb21wdFRlbXBsYXRlKGlucHV0OiB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHRlbXBsYXRlOiBzdHJpbmc7XG4gIHZhcmlhYmxlczogc3RyaW5nW107XG59KSB7XG4gIHJldHVybiBwcmlzbWEucHJvbXB0VGVtcGxhdGUudXBzZXJ0KHtcbiAgICB3aGVyZTogeyBuYW1lOiBpbnB1dC5uYW1lIH0sXG4gICAgdXBkYXRlOiB7XG4gICAgICBkZXNjcmlwdGlvbjogaW5wdXQuZGVzY3JpcHRpb24sXG4gICAgICB0ZW1wbGF0ZTogaW5wdXQudGVtcGxhdGUsXG4gICAgICB2YXJpYWJsZXM6IGlucHV0LnZhcmlhYmxlcyxcbiAgICB9LFxuICAgIGNyZWF0ZToge1xuICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dC5kZXNjcmlwdGlvbixcbiAgICAgIHRlbXBsYXRlOiBpbnB1dC50ZW1wbGF0ZSxcbiAgICAgIHZhcmlhYmxlczogaW5wdXQudmFyaWFibGVzLFxuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdFByb21wdFRlbXBsYXRlcygpIHtcbiAgcmV0dXJuIHByaXNtYS5wcm9tcHRUZW1wbGF0ZS5maW5kTWFueSh7IG9yZGVyQnk6IHsgY3JlYXRlZEF0OiBcImRlc2NcIiB9IH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvbXB0VGVtcGxhdGVCeU5hbWUobmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEucHJvbXB0VGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IG5hbWUgfSB9KTtcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJ1cHNlcnRQcm9tcHRUZW1wbGF0ZSIsImlucHV0IiwicHJvbXB0VGVtcGxhdGUiLCJ1cHNlcnQiLCJ3aGVyZSIsIm5hbWUiLCJ1cGRhdGUiLCJkZXNjcmlwdGlvbiIsInRlbXBsYXRlIiwidmFyaWFibGVzIiwiY3JlYXRlIiwibGlzdFByb21wdFRlbXBsYXRlcyIsImZpbmRNYW55Iiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImdldFByb21wdFRlbXBsYXRlQnlOYW1lIiwiZmluZFVuaXF1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/repo/promptTemplates.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt-templates%2Froute&page=%2Fapi%2Fprompt-templates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt-templates%2Froute.ts&appDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbaramsalem%2Fagents-repo%2Fagents%2Fsrc%2Fagents_wars%2Fweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();