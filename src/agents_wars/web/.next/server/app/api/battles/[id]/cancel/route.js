"use strict";(()=>{var e={};e.id=249,e.ids=[249],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},946:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>c,staticGenerationAsyncStorage:()=>p});var n={};r.r(n),r.d(n,{POST:()=>u});var a=r(9303),s=r(8716),i=r(670),o=r(7546);async function u(e,{params:t}){try{let r=e.headers.get("x-request-id")||(globalThis.crypto?.randomUUID?.()??Math.random().toString(36).slice(2)),n=t.id;if(!(0,o.Zn)(n))return new Response(JSON.stringify({error:"not_found"}),{status:404,headers:{"content-type":"application/json","x-request-id":r}});return(0,o.gK)(n,{status:"failed",error:"cancelled"}),new Response(JSON.stringify({id:n,status:"cancelled"}),{status:200,headers:{"content-type":"application/json","x-request-id":r}})}catch{let e=globalThis.crypto?.randomUUID?.()??Math.random().toString(36).slice(2);return new Response(JSON.stringify({error:"internal_error"}),{status:500,headers:{"content-type":"application/json","x-request-id":e}})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/battles/[id]/cancel/route",pathname:"/api/battles/[id]/cancel",filename:"route",bundlePath:"app/api/battles/[id]/cancel/route"},resolvedPagePath:"/Users/baramsalem/agents-repo/agents/src/agents_wars/web/app/api/battles/[id]/cancel/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:c}=d,g="/api/battles/[id]/cancel/route";function f(){return(0,i.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:p})}},9303:(e,t,r)=>{e.exports=r(517)},7546:(e,t,r)=>{r.d(t,{C3:()=>p,Cq:()=>o,Zn:()=>u,gK:()=>d,y:()=>l});let n=new Map,a=new Map,s=new Map,i=new Map;function o(e,t,r){let a=Date.now(),o={id:e,type:t,status:"pending",createdAt:a,updatedAt:a};return n.set(e,o),r&&(s.set(e,r),i.set(r,(i.get(r)??0)+1)),o}function u(e){return n.get(e)}function d(e,t){let r=n.get(e);if(!r)return;let o={...r,...t,updatedAt:Date.now()};n.set(e,o);let u=a.get(e);if(u)for(let e of u)e(o);if("succeeded"===o.status||"failed"===o.status){let t=s.get(e);if(t){let r=i.get(t)??0;i.set(t,Math.max(0,r-1)),s.delete(e)}setTimeout(()=>{n.delete(e),a.delete(e)},250)}return o}function l(e,t){let r=a.get(e)??new Set;return r.add(t),a.set(e,r),()=>{let r=a.get(e);r&&(r.delete(t),0===r.size&&a.delete(e))}}function p(e,t){return(i.get(e)??0)<t}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(946));module.exports=n})();