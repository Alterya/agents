"use strict";(()=>{var e={};e.id=679,e.ids=[679],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5679:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{GET:()=>p});var a=s(9303),n=s(8716),i=s(670),o=s(3538);async function p(e,{params:t}){try{let{searchParams:s}=new URL(e.url),r=Math.max(1,Number(s.get("page")||1)),a=Math.max(1,Math.min(100,Number(s.get("limit")||20))),n=t.id;if("1"===process.env.E2E_MODE||"1"===process.env.LOCAL_MODE)return new Response(JSON.stringify({page:r,limit:a,total:0,items:[]}),{status:200,headers:{"content-type":"application/json"}});let[i,p]=await Promise.all([o._.message.findMany({where:{conversationId:n},orderBy:{createdAt:"asc"},skip:(r-1)*a,take:a,select:{id:!0,role:!0,content:!0,tokensIn:!0,tokensOut:!0,costUsd:!0,createdAt:!0}}),o._.message.count({where:{conversationId:n}})]);return new Response(JSON.stringify({page:r,limit:a,total:p,items:i}),{status:200,headers:{"content-type":"application/json"}})}catch{return new Response(JSON.stringify({error:"internal_error"}),{status:500,headers:{"content-type":"application/json"}})}}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/battles/[id]/messages/route",pathname:"/api/battles/[id]/messages",filename:"route",bundlePath:"app/api/battles/[id]/messages/route"},resolvedPagePath:"/Users/baramsalem/agents-repo/agents/src/agents_wars/web/app/api/battles/[id]/messages/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:c}=u,m="/api/battles/[id]/messages/route";function g(){return(0,i.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:d})}},9303:(e,t,s)=>{e.exports=s(517)},3538:(e,t,s)=>{s.d(t,{_:()=>a});var r=s(3524);let a=global.prisma??new r.PrismaClient({log:["error","warn"]})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948],()=>s(5679));module.exports=r})();