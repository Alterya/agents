"use strict";(()=>{var e={};e.id=575,e.ids=[575],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3256:(e,t,r)=>{let o;r.r(t),r.d(t,{originalPathname:()=>c,patchFetch:()=>A,requestAsyncStorage:()=>u,routeModule:()=>E,serverHooks:()=>_,staticGenerationAsyncStorage:()=>d});var i={};r.r(i),r.d(i,{GET:()=>m});var n=r(9303),a=r(8716),s=r(670),p=r(5844);async function l(){let e=(0,p.i)();if(!e.openrouterApiKey)return[];let t=Date.now();if(o&&t-o.fetchedAt<216e5)return o.data;let r={Authorization:`Bearer ${e.openrouterApiKey}`,"HTTP-Referer":e.openrouterSite||"","X-Title":"Agent Wars"},i=await fetch("https://openrouter.ai/api/v1/models",{headers:r});if(!i.ok)throw Error(`models_fetch_failed:${i.status}`);let n=await i.json(),a=(Array.isArray(n?.data)?n.data:[]).map(e=>({id:String(e?.id??""),contextTokens:"number"==typeof e?.context_length?e.context_length:void 0,promptUSDPerMTok:"number"==typeof e?.pricing?.prompt?e.pricing.prompt:void 0,completionUSDPerMTok:"number"==typeof e?.pricing?.completion?e.pricing.completion:void 0}));return o={data:a,fetchedAt:t},a}async function m(e){try{let e=await l();return new Response(JSON.stringify({models:e}),{status:200,headers:{"content-type":"application/json"}})}catch(t){let e="string"==typeof t?.message&&t.message.startsWith("models_fetch_failed:")?Number(t.message.split(":")[1])||502:500;return new Response(JSON.stringify({error:"models_fetch_failed"}),{status:e,headers:{"content-type":"application/json"}})}}let E=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/llm/models/route",pathname:"/api/llm/models",filename:"route",bundlePath:"app/api/llm/models/route"},resolvedPagePath:"/Users/baramsalem/agents-repo/agents/src/agents_wars/web/app/api/llm/models/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:_}=E,c="/api/llm/models/route";function A(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:d})}},5844:(e,t,r)=>{let o;r.d(t,{i:()=>s});var i=r(7410);let n=e=>i.z.preprocess(e=>"string"==typeof e&&0===e.trim().length?void 0:e,e.optional()),a=i.z.object({OPENAI_API_KEY:n(i.z.string().trim().min(1)),OPENROUTER_API_KEY:n(i.z.string().trim().min(1)),OPENROUTER_SITE:n(i.z.string().trim()),ALLOWED_MODELS:n(i.z.string().trim()),SUMMARIZER_MODEL:n(i.z.string().trim()),MAX_TOKENS_PER_CALL:i.z.coerce.number().int().positive().default(512),MAX_MESSAGES_PER_CONVO:i.z.coerce.number().int().positive().default(25),RATE_LIMIT_ENABLED:i.z.union([i.z.string(),i.z.boolean()]).transform(e=>"string"==typeof e?"false"!==e.toLowerCase():!!e).default(!0),RATE_LIMIT_RPM:i.z.coerce.number().int().positive().default(60),REQUEST_TIMEOUT_MS:i.z.coerce.number().int().positive().default(6e4),MAX_USD_PER_CONVO:i.z.coerce.number().nonnegative().optional()}).refine(e=>!!(e.OPENAI_API_KEY||e.OPENROUTER_API_KEY),"At least one provider key must be set: OPENAI_API_KEY or OPENROUTER_API_KEY");function s(){if(o)return o;let e={...process.env},t=a.parse(e);return o={openaiApiKey:t.OPENAI_API_KEY||void 0,openrouterApiKey:t.OPENROUTER_API_KEY||void 0,openrouterSite:t.OPENROUTER_SITE||void 0,allowedModels:t.ALLOWED_MODELS?t.ALLOWED_MODELS.split(",").map(e=>e.trim()).filter(Boolean):[],summarizerModel:t.SUMMARIZER_MODEL||void 0,maxTokensPerCall:t.MAX_TOKENS_PER_CALL,maxMessagesPerConversation:t.MAX_MESSAGES_PER_CONVO,rateLimitEnabled:t.RATE_LIMIT_ENABLED,rateLimitRpm:t.RATE_LIMIT_RPM,requestTimeoutMs:t.REQUEST_TIMEOUT_MS,maxUsdPerConversation:t.MAX_USD_PER_CONVO,redisUrl:e.REDIS_URL||void 0}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948,691],()=>r(3256));module.exports=o})();