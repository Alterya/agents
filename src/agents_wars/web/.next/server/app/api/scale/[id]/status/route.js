"use strict";(()=>{var e={};e.id=492,e.ids=[492],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7811:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var n={};a.r(n),a.d(n,{GET:()=>l,runtime:()=>i});var s=a(9303),r=a(8716),o=a(670),u=a(7546),d=a(3538);let i="nodejs";async function l(e,{params:t}){let a=t.id,n=new TextEncoder;return new Response(new ReadableStream({start(t){async function s(){let e=(0,u.Zn)(a);if(!e){let t=null;"1"===process.env.E2E_MODE||"1"===process.env.LOCAL_MODE?t=globalThis.__run_reports?.get?.(a)??null:t=await d._.runReport.findUnique({where:{runId:a}}),t&&(e={id:a,type:"scale",status:"succeeded",data:{runId:t.runId,total:t.runCount,succeeded:t.stats?.succeeded??void 0,failed:t.stats?.failed??void 0,conversationIds:t.stats?.conversationIds??void 0},createdAt:Date.now(),updatedAt:Date.now()})}t.enqueue(n.encode(`data: ${JSON.stringify(e)}

`)),e&&"succeeded"!==e.status&&"failed"!==e.status||(t.enqueue(n.encode(`data: [DONE]

`)),t.close())}s();let r=(0,u.y)(a,()=>s());e.signal.addEventListener("abort",()=>{r();try{t.close()}catch{}})}}),{status:200,headers:{"content-type":"text/event-stream; charset=utf-8","cache-control":"no-cache, no-transform",connection:"keep-alive"}})}let c=new s.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/scale/[id]/status/route",pathname:"/api/scale/[id]/status",filename:"route",bundlePath:"app/api/scale/[id]/status/route"},resolvedPagePath:"/Users/baramsalem/agents-repo/agents/src/agents_wars/web/app/api/scale/[id]/status/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:f}=c,m="/api/scale/[id]/status/route";function v(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},9303:(e,t,a)=>{e.exports=a(517)},7546:(e,t,a)=>{a.d(t,{C3:()=>c,Cq:()=>u,Zn:()=>d,gK:()=>i,y:()=>l});let n=new Map,s=new Map,r=new Map,o=new Map;function u(e,t,a){let s=Date.now(),u={id:e,type:t,status:"pending",createdAt:s,updatedAt:s};return n.set(e,u),a&&(r.set(e,a),o.set(a,(o.get(a)??0)+1)),u}function d(e){return n.get(e)}function i(e,t){let a=n.get(e);if(!a)return;let u={...a,...t,updatedAt:Date.now()};n.set(e,u);let d=s.get(e);if(d)for(let e of d)e(u);if("succeeded"===u.status||"failed"===u.status){let t=r.get(e);if(t){let a=o.get(t)??0;o.set(t,Math.max(0,a-1)),r.delete(e)}setTimeout(()=>{n.delete(e),s.delete(e)},250)}return u}function l(e,t){let a=s.get(e)??new Set;return a.add(t),s.set(e,a),()=>{let a=s.get(e);a&&(a.delete(t),0===a.size&&s.delete(e))}}function c(e,t){return(o.get(e)??0)<t}},3538:(e,t,a)=>{a.d(t,{_:()=>s});var n=a(3524);let s=global.prisma??new n.PrismaClient({log:["error","warn"]})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[948],()=>a(7811));module.exports=n})();